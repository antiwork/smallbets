/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/panzoom@9.4.3/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"/npm/wheel@1.0.0/+esm";import t from"/npm/amator@1.1.0/+esm";import n from"/npm/ngraph.events@1.2.2/+esm";var o=function(e,t,n){"object"!=typeof n&&(n={});var o,a,c,u,f,s,l,m,d,h,v="number"==typeof n.minVelocity?n.minVelocity:5,p="number"==typeof n.amplitude?n.amplitude:.25,y="function"==typeof n.cancelAnimationFrame?n.cancelAnimationFrame:r(),g="function"==typeof n.requestAnimationFrame?n.requestAnimationFrame:i();return{start:function(){o=e(),s=d=u=l=0,a=new Date,y(c),y(h),c=g(x)},stop:function(){y(c),y(h);var t=e();f=t.x,m=t.y,a=Date.now(),(u<-v||u>v)&&(f+=s=p*u);(l<-v||l>v)&&(m+=d=p*l);h=g(w)},cancel:function(){y(c),y(h)}};function x(){var t=Date.now(),n=t-a;a=t;var r=e(),i=r.x-o.x,f=r.y-o.y;o=r;var s=1e3/(1+n);u=.8*i*s+.2*u,l=.8*f*s+.2*l,c=g(x)}function w(){var e=Date.now()-a,n=!1,o=0,r=0;s&&((o=-s*Math.exp(-e/342))>.5||o<-.5?n=!0:o=s=0),d&&((r=-d*Math.exp(-e/342))>.5||r<-.5?n=!0:r=d=0),n&&(t(f+o,m+r),h=g(w))}};function r(){return"function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearTimeout}function i(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,16)}}var a=function(e){if(e)return{capture:u,release:u};var t,n,o,r=!1;return{capture:function(e){r=!0,n=window.document.onselectstart,o=window.document.ondragstart,window.document.onselectstart=c,(t=e).ondragstart=c},release:function(){if(!r)return;r=!1,window.document.onselectstart=n,t&&(t.ondragstart=o)}}};function c(e){return e.stopPropagation(),!1}function u(){}var f=function(){this.x=0,this.y=0,this.scale=1};var s={exports:{}};function l(e){return e&&e.ownerSVGElement&&e.getCTM}s.exports=function(e,t){if(!l(e))throw new Error("svg element is required for svg.panzoom to work");var n=e.ownerSVGElement;if(!n)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");t.disableKeyboardInteraction||n.setAttribute("tabindex",0);return{getBBox:function(){var t=e.getBBox();return{left:t.x,top:t.y,width:t.width,height:t.height}},getScreenCTM:function(){var e=n.getCTM();if(!e)return n.getScreenCTM();return e},getOwner:function(){return n},applyTransform:function(t){e.setAttribute("transform","matrix("+t.scale+" 0 0 "+t.scale+" "+t.x+" "+t.y+")")},initTransform:function(t){var o=e.getCTM();null===o&&(o=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix());t.x=o.e,t.y=o.f,t.scale=o.a,n.removeAttributeNS(null,"viewBox")}}},s.exports.canAttach=l;var m={exports:{}};function d(e){return e&&e.parentElement&&e.style}m.exports=function(e,t){if(!d(e))throw new Error("panzoom requires DOM element to be attached to the DOM tree");var n=e.parentElement;e.scrollTop=0,t.disableKeyboardInteraction||n.setAttribute("tabindex",0);return{getBBox:function(){return{left:0,top:0,width:e.clientWidth,height:e.clientHeight}},getOwner:function(){return n},applyTransform:function(t){e.style.transformOrigin="0 0 0",e.style.transform="matrix("+t.scale+", 0, 0, "+t.scale+", "+t.x+", "+t.y+")"}}},m.exports.canAttach=d;var h=e,v=t,p=n,y=o,g=a,x=g(),w=g(!0),b=f,E=s.exports,C=m.exports,T=M;function M(e,t){var n=(t=t||{}).controller;if(n||(E.canAttach(e)?n=E(e,t):C.canAttach(e)&&(n=C(e,t))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var o=n.getOwner(),r={x:0,y:0},i=!1,a=new b;n.initTransform&&n.initTransform(a);var c,u="function"==typeof t.filterKey?t.filterKey:A,f="number"==typeof t.pinchSpeed?t.pinchSpeed:1,s=t.bounds,l="number"==typeof t.maxZoom?t.maxZoom:Number.POSITIVE_INFINITY,m="number"==typeof t.minZoom?t.minZoom:0,d="number"==typeof t.boundsPadding?t.boundsPadding:.05,g="number"==typeof t.zoomDoubleClickSpeed?t.zoomDoubleClickSpeed:1.75,T=t.beforeWheel||A,M=t.beforeMouseDown||A,D="number"==typeof t.zoomSpeed?t.zoomSpeed:1,L=S(t.transformOrigin),z=t.enableTextSelection?w:x;!function(e){var t=typeof e;if("undefined"===t||"boolean"===t)return;var n=B(e.left)&&B(e.top)&&B(e.bottom)&&B(e.right);if(!n)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}(s),t.autocenter&&function(){var e,t,r=0,i=0,c=ie();if(c)r=c.left,i=c.top,e=c.right-c.left,t=c.bottom-c.top;else{var u=o.getBoundingClientRect();e=u.width,t=u.height}var f=n.getBBox();if(0===f.width||0===f.height)return;var s=t/f.height,l=e/f.width,m=Math.min(l,s);a.x=-(f.left+f.width/2)*m+e/2+r,a.y=-(f.top+f.height/2)*m+t/2+i,a.scale=m}();var F,N,Z,q,O,P,R,I,V,Y,j=0,X=0,G=0,K=null,W=new Date,H=!1,J=!1;R="smoothScroll"in t&&!t.smoothScroll?{start:A,stop:A,cancel:A}:y((function(){return{x:a.x,y:a.y}}),(function(e,t){ze(),ne(e,t)}),t.smoothScroll);var U=!1;se();var _={dispose:function(){le()},moveBy:fe,moveTo:ne,smoothMoveTo:function(e,t){fe(e-a.x,t-a.y,!0)},centerOn:function(e){var t=e.ownerSVGElement;if(!t)throw new Error("ui element is required to be within the scene");var n=e.getBoundingClientRect(),o=n.left+n.width/2,r=n.top+n.height/2,i=t.getBoundingClientRect(),a=i.width/2-o,c=i.height/2-r;fe(a,c,!0)},zoomTo:Le,zoomAbs:ue,smoothZoom:Be,smoothZoomAbs:function(e,t,n){var o={scale:a.scale},r={scale:n};R.cancel(),ze(),V=v(o,r,{step:function(n){ue(e,t,n.scale)}})},showRectangle:function(e){var t=o.getBoundingClientRect(),n=te(t.width,t.height),r=e.right-e.left,i=e.bottom-e.top;if(!Number.isFinite(r)||!Number.isFinite(i))throw new Error("Invalid rectangle");var c=n.x/r,u=n.y/i,f=Math.min(c,u);a.x=-(e.left+r/2)*f+n.x/2,a.y=-(e.top+i/2)*f+n.y/2,a.scale=f},pause:function(){le(),U=!0},resume:function(){U&&(se(),U=!1)},isPaused:function(){return U},getTransform:function(){return a},getMinZoom:function(){return m},setMinZoom:function(e){m=e},getMaxZoom:function(){return l},setMaxZoom:function(e){l=e},getTransformOrigin:function(){return L},setTransformOrigin:function(e){L=S(e)},getZoomSpeed:function(){return D},setZoomSpeed:function(e){if(!Number.isFinite(e))throw new Error("Zoom speed should be a number");D=e}};p(_);var Q="number"==typeof t.initialX?t.initialX:a.x,$="number"==typeof t.initialY?t.initialY:a.y,ee="number"==typeof t.initialZoom?t.initialZoom:a.scale;return Q==a.x&&$==a.y&&ee==a.scale||ue(Q,$,ee),_;function te(e,t){if(n.getScreenCTM){var o=n.getScreenCTM(),i=o.a,a=o.d,c=o.e,u=o.f;r.x=e*i-c,r.y=t*a-u}else r.x=e,r.y=t;return r}function ne(e,t){a.x=e,a.y=t,re(),Oe("pan"),ae()}function oe(e,t){ne(a.x+e,a.y+t)}function re(){var e=ie();if(e){var t,o,r,i,c=!1,u=(t=n.getBBox(),r=t.left,i=t.top,{left:(o={x:r*a.scale+a.x,y:i*a.scale+a.y}).x,top:o.y,right:t.width*a.scale+o.x,bottom:t.height*a.scale+o.y}),f=e.left-u.right;return f>0&&(a.x+=f,c=!0),(f=e.right-u.left)<0&&(a.x+=f,c=!0),(f=e.top-u.bottom)>0&&(a.y+=f,c=!0),(f=e.bottom-u.top)<0&&(a.y+=f,c=!0),c}}function ie(){if(s){if("boolean"==typeof s){var e=o.getBoundingClientRect(),t=e.width,n=e.height;return{left:t*d,top:n*d,right:t*(1-d),bottom:n*(1-d)}}return s}}function ae(){i=!0,c=window.requestAnimationFrame(me)}function ce(e,t,n){if(k(e)||k(t)||k(n))throw new Error("zoom requires valid numbers");var o=a.scale*n;if(o<m){if(a.scale===m)return;n=m/a.scale}if(o>l){if(a.scale===l)return;n=l/a.scale}var r=te(e,t);(a.x=r.x-n*(r.x-a.x),a.y=r.y-n*(r.y-a.y),s&&1===d&&1===m)?(a.scale*=n,re()):re()||(a.scale*=n);Oe("zoom"),ae()}function ue(e,t,n){ce(e,t,n/a.scale)}function fe(e,t,n){if(!n)return oe(e,t);I&&I.cancel();var o=0,r=0;I=v({x:0,y:0},{x:e,y:t},{step:function(e){oe(e.x-o,e.y-r),o=e.x,r=e.y}})}function se(){o.addEventListener("mousedown",Ee,{passive:!1}),o.addEventListener("dblclick",be,{passive:!1}),o.addEventListener("touchstart",he,{passive:!1}),o.addEventListener("keydown",de,{passive:!1}),h.addWheelListener(o,De,{passive:!1}),ae()}function le(){h.removeWheelListener(o,De),o.removeEventListener("mousedown",Ee),o.removeEventListener("keydown",de),o.removeEventListener("dblclick",be),o.removeEventListener("touchstart",he),c&&(window.cancelAnimationFrame(c),c=0),R.cancel(),Me(),Se(),z.release(),Ze()}function me(){i&&(i=!1,n.applyTransform(a),Oe("transform"),c=0)}function de(e){var t=0,n=0,r=0;if(38===e.keyCode?n=1:40===e.keyCode?n=-1:37===e.keyCode?t=1:39===e.keyCode?t=-1:189===e.keyCode||109===e.keyCode?r=1:187!==e.keyCode&&107!==e.keyCode||(r=-1),!u(e,t,n,r)){if(t||n){e.preventDefault(),e.stopPropagation();var i=o.getBoundingClientRect();fe(.05*(a=Math.min(i.width,i.height))*t,.05*a*n)}if(r){var a,c=Fe(100*r);Le((a=L?ke():{x:(f=o.getBoundingClientRect()).width/2,y:f.height/2}).x,a.y,c)}var f}}function he(e){if(function(e){if(t.onTouch&&!t.onTouch(e))return;e.stopPropagation(),e.preventDefault()}(e),ye(),1===e.touches.length)return function(e){X=new Date;var t=e.touches[0],n=Ae(t);F=n;var o=te(n.x,n.y);N=o.x,Z=o.y,q=N,O=Z,R.cancel(),ve()}(e,e.touches[0]);2===e.touches.length&&(P=we(e.touches[0],e.touches[1]),Y=!0,ve())}function ve(){H||(H=!0,document.addEventListener("touchmove",pe),document.addEventListener("touchend",xe),document.addEventListener("touchcancel",xe))}function pe(e){if(1===e.touches.length){e.stopPropagation();var t=te((l=Ae(e.touches[0])).x,l.y),n=t.x-N,o=t.y-Z;0!==n&&0!==o&&Ne(),N=t.x,Z=t.y,fe(n,o)}else if(2===e.touches.length){Y=!0;var r=e.touches[0],i=e.touches[1],a=we(r,i),c=1+(a/P-1)*f,u=Ae(r),s=Ae(i);if(N=(u.x+s.x)/2,Z=(u.y+s.y)/2,L){var l=ke();N=l.x,Z=l.y}Le(N,Z,c),P=a,e.stopPropagation(),e.preventDefault()}}function ye(){G&&(clearTimeout(G),G=0)}function ge(e){if(t.onClick){ye();var n=N-q,o=Z-O;Math.sqrt(n*n+o*o)>5||(G=setTimeout((function(){G=0,t.onClick(e)}),300))}}function xe(e){if(ye(),e.touches.length>0){var t=te((n=Ae(e.touches[0])).x,n.y);N=t.x,Z=t.y}else{var n,o=new Date;if(o-j<300)if(L)Be((n=ke()).x,n.y,g);else Be(F.x,F.y,g);else o-X<200&&ge(e);j=o,Ze(),Se()}}function we(e,t){var n=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(n*n+o*o)}function be(e){!function(e){ye(),t.onDoubleClick&&!t.onDoubleClick(e)||(e.preventDefault(),e.stopPropagation())}(e);var n=Ae(e);L&&(n=ke()),Be(n.x,n.y,g)}function Ee(e){if(ye(),!M(e)){if(K=e,W=new Date,H)return e.stopPropagation(),!1;if(1===e.button&&null!==window.event||0===e.button){R.cancel();var t=Ae(e),n=te(t.x,t.y);return q=N=n.x,O=Z=n.y,document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",Te),z.capture(e.target||e.srcElement),!1}}}function Ce(e){if(!H){Ne();var t=Ae(e),n=te(t.x,t.y),o=n.x-N,r=n.y-Z;N=n.x,Z=n.y,fe(o,r)}}function Te(){new Date-W<200&&ge(K),z.release(),Ze(),Me()}function Me(){document.removeEventListener("mousemove",Ce),document.removeEventListener("mouseup",Te),J=!1}function Se(){document.removeEventListener("touchmove",pe),document.removeEventListener("touchend",xe),document.removeEventListener("touchcancel",xe),J=!1,Y=!1,H=!1}function De(e){if(!T(e)){R.cancel();var t=e.deltaY;e.deltaMode>0&&(t*=100);var n=Fe(t);if(1!==n){var o=L?ke():Ae(e);Le(o.x,o.y,n),e.preventDefault()}}}function Ae(e){var t=o.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function Be(e,t,n){var o=a.scale,r={scale:o},i={scale:n*o};R.cancel(),ze(),V=v(r,i,{step:function(n){ue(e,t,n.scale)},done:qe})}function ke(){var e=o.getBoundingClientRect();return{x:e.width*L.x,y:e.height*L.y}}function Le(e,t,n){return R.cancel(),ze(),ce(e,t,n)}function ze(){V&&(V.cancel(),V=null)}function Fe(e){return 1-Math.sign(e)*Math.min(.25,Math.abs(D*e/128))}function Ne(){J||(Oe("panstart"),J=!0,R.start())}function Ze(){J&&(Y||R.stop(),Oe("panend"))}function qe(){Oe("zoomend")}function Oe(e){_.fire(e,_)}}function S(e){if(e)return"object"==typeof e?(B(e.x)&&B(e.y)||D(e),e):void D()}function D(e){throw console.error(e),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join("\n"))}function A(){}function B(e){return Number.isFinite(e)}function k(e){return Number.isNaN?Number.isNaN(e):e!=e}!function(){if("undefined"!=typeof document){var e=document.getElementsByTagName("script");if(e){for(var t,n=0;n<e.length;++n){var o=e[n];if(o.src&&o.src.match(/\bpanzoom(\.min)?\.js/)){t=o;break}}if(t){var r=t.getAttribute("query");if(r){var i=t.getAttribute("name")||"pz",a=Date.now();!function e(){var n=document.querySelector(r);if(!n){return Date.now()-a<2e3?void setTimeout(e,100):void console.error("Cannot find the panzoom element",i)}var o=function(e){for(var t=e.attributes,n={},o=0;o<t.length;++o){var r=c(t[o]);r&&(n[r.name]=r.value)}return n}(t);console.log(o),window[i]=M(n,o)}()}}}}function c(e){if(e.name&&("p"===e.name[0]&&"z"===e.name[1]&&"-"===e.name[2]))return{name:e.name.substr(3),value:JSON.parse(e.value)}}}();export{T as default};
//# sourceMappingURL=/sm/1e08240a81fea28c684b3bbf83992cff2b7f9ab20e488cd0832c2c7140a07023.map