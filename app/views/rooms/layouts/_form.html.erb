<%= form_with model: room do |form| %>
  <div class="flex align-center gap">
    <% if Current.user.can_administer?(room) %>
      <%= translation_button(:room_name) %>

      <label class="flex-item-grow txt-large">
        <%= form.text_field :name, name: "room[name]", id: "room_name", class: "input full-width",
              required: true, autofocus: true, placeholder: "Name the room",
              data: { turbo_permanent: true, action: "keydown.enter->form#submit:prevent" } %>
        <span class="for-screen-reader">Name this room</span>
      </label>
    <% else %>
      <h1 class="flex-item-grow txt-x-large">
        <%= room.name %>
      </h1>
    <% end %>
  </div>

  <hr class="margin-block borderless">

  <% if Current.user.administrator? %>
    <div class="pad-inline">
      <label class="flex flex-column gap-half txt-large" for="room_slug">
        <span>Custom URL slug (optional)</span>
        <%= text_field_tag "room[slug]", room.slug, id: "room_slug", class: "input full-width",
              placeholder: "e.g. founders-lounge",
              pattern: "[a-z0-9](?:[a-z0-9-]*[a-z0-9])",
              maxlength: 80,
              inputmode: "lowercase",
              spellcheck: false,
              data: { action: "keydown.enter->form#submit:prevent" } %>
        <small class="txt-secondary">Accessible at /<%= room.slug.presence || "your-slug" %>. Only letters, numbers, and hyphens; no leading/trailing hyphen.</small>
      </label>
    </div>

    <hr class="margin-block borderless">
  <% end %>

  <section class="room-access margin-block pad-inline fill-shade border-radius">
    <%= yield form %>
  </section>

  <%= submit_room_button_tag if Current.user.can_administer?(room) %>
<% end %>
